<!DOCTYPE html>
<html lang="vi"
    x-data="{ section: 'overview', darkMode: true, showModal: false, selectedIssue: null, liveKwh: 1240.5, temp: 26.5, humid: 65, aqi: 42 }"
    :class="{ 'dark': darkMode }">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SCP BMIS - Smart Connected Platform</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;900&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: { extend: { colors: { scp: { bg: '#030712', card: '#111827', primary: '#3b82f6' } } } }
        }
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
            transition: background-color 0.3s;
        }

        .app-wrapper {
            display: flex;
            height: 100vh;
            width: 100vw;
        }

        .sidebar {
            width: 18rem;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            z-index: 50;
            border-right-width: 1px;
            transition: 0.3s;
        }

        .dark .sidebar {
            background: #0b0f1a !important;
            border-color: #1e293b;
        }

        .light .sidebar {
            background: #f8fafc !important;
            border-color: #e2e8f0;
        }

        .logo-frame {
            height: 109px;
            min-height: 109px;
            display: flex;
            align-items: center;
            padding: 0 1.5rem;
            border-bottom-width: 1px;
            box-sizing: border-box;
        }

        .dark .logo-frame {
            border-color: #1e293b;
            background-color: #0b0f1a !important;
        }

        .light .logo-frame {
            border-color: #e2e8f0;
            background-color: #f8fafc !important;
        }

        .nav-link {
            transition: 0.3s;
            border-left: 4px solid transparent;
            font-size: 13px;
            cursor: pointer;
            text-decoration: none;
            display: flex;
            align-items: center;
        }

        .dark .nav-link {
            color: #94a3b8;
        }

        .light .nav-link {
            color: #475569;
        }

        .nav-link:hover {
            background: rgba(59, 130, 246, 0.05);
        }

        .nav-link.active {
            border-left-color: #3b82f6;
            background: linear-gradient(90deg, rgba(59, 130, 246, 0.1) 0%, rgba(59, 130, 246, 0) 100%);
            font-weight: 600;
        }

        .dark .nav-link.active {
            color: #fff !important;
        }

        .light .nav-link.active {
            color: #1e40af !important;
        }

        .main-container {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .dark .main-container {
            background-color: #020617 !important;
        }

        .light .main-container {
            background-color: #f1f5f9 !important;
        }

        .main-header {
            height: 109px;
            min-height: 109px;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom-width: 1px;
            box-sizing: border-box;
        }

        .dark .main-header {
            border-color: #1e293b;
            background-color: #020617 !important;
        }

        .light .main-header {
            border-color: #e2e8f0;
            background-color: #ffffff !important;
        }

        .content-scroll {
            flex-grow: 1;
            overflow-y: auto;
            padding: 2rem;
        }

        .stat-card {
            border-width: 1px;
            border-radius: 12px;
            padding: 1.25rem;
            transition: 0.3s;
        }

        .dark .stat-card {
            background-color: #111827 !important;
            border-color: #1e293b;
        }

        .light .stat-card {
            background-color: #ffffff !important;
            border-color: #e2e8f0;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .cam-container {
            width: 100%;
            aspect-ratio: 16 / 9;
            overflow: hidden;
            border-radius: 8px;
            background: #000;
        }

        [x-cloak] {
            display: none !important;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #10b981;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0px rgba(16, 185, 129, 0.4);
            }

            100% {
                box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);
            }
        }

        ::-webkit-scrollbar {
            width: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: #3b82f6;
            border-radius: 10px;
        }
    </style>
</head>

<body :class="darkMode ? 'dark' : 'light'" x-init="
    setInterval(() => { liveKwh = (liveKwh + 0.1).toFixed(1); }, 2000);
    setInterval(() => { temp = (26 + Math.random()).toFixed(1); humid = Math.floor(60 + Math.random() * 10); aqi = Math.floor(35 + Math.random() * 15); }, 3000);
">
    <div class="app-wrapper">
        <aside class="sidebar">
            <div class="logo-frame gap-4">
                <div
                    class="bg-blue-600 w-[56px] h-[56px] flex items-center justify-center rounded-xl shadow-lg text-white text-2xl">
                    <i class="fas fa-network-wired"></i>
                </div>
                <div>
                    <h1 class="text-2xl font-black tracking-tighter uppercase leading-none"
                        :class="darkMode ? 'text-white' : 'text-slate-900'">SCP BMIS</h1>
                    <p class="text-[9px] opacity-60 uppercase tracking-widest mt-1 font-bold text-blue-500">Smart
                        Building</p>
                </div>
            </div>

            <nav class="flex-grow py-4 overflow-y-auto">
                <div class="px-6 mb-2 text-[10px] font-bold text-slate-500 uppercase tracking-widest">Hệ thống</div>
                <div @click="section = 'overview'" :class="section === 'overview' ? 'active' : ''"
                    class="nav-link px-6 py-4">
                    <i class="fas fa-chart-pie mr-3 w-5 text-lg"></i> Tổng quan vận hành
                </div>
                <div @click="section = 'roadmap'" :class="section === 'roadmap' ? 'active' : ''"
                    class="nav-link px-6 py-4">
                    <i class="fas fa-project-diagram mr-3 w-5 text-lg"></i> Lộ trình triển khai
                </div>

                <a href="home.html" target="_blank" class="nav-link px-6 py-4 text-orange-500 hover:text-orange-400">
                    <i class="fas fa-mobile-alt mr-3 w-5 text-lg animate-pulse"></i>
                    <span class="font-bold">SCP Resident App</span>
                    <i class="fas fa-external-link-alt ml-auto text-[10px] opacity-50"></i>
                </a>

                <div class="px-6 mt-6 mb-2 text-[10px] font-bold text-slate-500 uppercase tracking-widest">Quản lý cư
                    dân</div>
                <div class="nav-link px-6 py-3"><i class="fas fa-door-open mr-3 w-5"></i> Danh sách căn hộ</div>
                <div class="nav-link px-6 py-3"><i class="fas fa-bullhorn mr-3 w-5"></i> Thông báo [GĐ1]</div>
                <div class="nav-link px-6 py-3"><i class="fas fa-credit-card mr-3 w-5"></i> SCP Pay [GĐ2]</div>

                <div class="px-6 mt-6 mb-2 text-[10px] font-bold text-slate-500 uppercase tracking-widest">Dịch vụ & Kỹ
                    thuật</div>
                <div class="nav-link px-6 py-3"><i class="fas fa-dumbbell mr-3 w-5"></i> Tiện ích Gym/Pool</div>
                <div class="nav-link px-6 py-3"><i class="fas fa-tools mr-3 w-5"></i> Đội ngũ kỹ thuật</div>
            </nav>

            <div class="p-6 border-t flex items-center justify-between"
                :class="darkMode ? 'border-slate-800' : 'border-slate-200'">
                <div class="flex items-center gap-3">
                    <div class="status-dot"></div>
                    <span class="text-[10px] font-bold uppercase tracking-widest"
                        :class="darkMode ? 'text-slate-400' : 'text-slate-600'">Online</span>
                </div>
                <button @click="darkMode = !darkMode; updateCharts()"
                    class="p-2 bg-slate-800 dark:bg-slate-700 text-yellow-500 rounded-lg">
                    <i :class="darkMode ? 'fas fa-sun' : 'fas fa-moon'"></i>
                </button>
            </div>
        </aside>

        <div class="main-container">
            <header class="main-header shadow-sm">
                <div>
                    <h2 class="text-[10px] text-blue-500 font-bold uppercase tracking-widest">Dự án: SCP Complex Center
                    </h2>
                    <h3 class="text-2xl font-black uppercase tracking-tight transition-colors"
                        :class="darkMode ? 'text-white' : 'text-slate-800'"
                        x-text="section === 'overview' ? 'DASHBOARD GIÁM SÁT' : 'ROADMAP PHÁT TRIỂN'"></h3>
                </div>
                <div class="text-right">
                    <p class="text-[9px] opacity-50 uppercase font-bold"
                        :class="darkMode ? 'text-white' : 'text-slate-900'">Điện năng hôm nay</p>
                    <p class="text-xl font-black text-amber-500 tracking-tighter" x-text="liveKwh + ' kWh'"></p>
                </div>
            </header>

            <div class="content-scroll">
                <div x-show="section === 'overview'" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4">
                        <div class="stat-card border-emerald-500/20">
                            <span class="text-[9px] font-bold text-slate-500 uppercase block">Nhiệt độ</span>
                            <div class="text-xl font-black text-emerald-400" x-text="temp + '°C'"></div>
                            <div class="h-[45px] mt-2"><canvas id="chartTemp"></canvas></div>
                        </div>
                        <div class="stat-card border-blue-500/20">
                            <span class="text-[9px] font-bold text-slate-500 uppercase block">Độ ẩm</span>
                            <div class="text-xl font-black text-blue-400" x-text="humid + '%'"></div>
                            <div class="h-[45px] mt-2"><canvas id="chartHumid"></canvas></div>
                        </div>
                        <div class="stat-card border-purple-500/20">
                            <span class="text-[9px] font-bold text-slate-500 uppercase block"
                                :class="darkMode ? 'text-white' : 'text-slate-800'">AQI</span>
                            <div class="text-xl font-black text-purple-400" x-text="aqi"></div>
                            <div class="h-[45px] mt-2"><canvas id="chartAQI"></canvas></div>
                        </div>
                        <div class="stat-card">
                            <span class="text-[9px] font-bold text-slate-500 uppercase block">Cư dân</span>
                            <div class="text-xl font-black" :class="darkMode ? 'text-white' : 'text-slate-800'">4,250
                            </div>
                            <div class="mt-4 text-[8px] text-emerald-500 font-bold uppercase"><i
                                    class="fas fa-caret-up"></i> 1.2% Trend</div>
                        </div>
                        <div class="stat-card">
                            <span class="text-[9px] font-bold text-slate-500 uppercase block">Căn hộ</span>
                            <div class="text-xl font-black" :class="darkMode ? 'text-white' : 'text-slate-800'">1,500
                            </div>
                            <div class="mt-4 h-1 bg-slate-200 dark:bg-slate-800 rounded-full overflow-hidden">
                                <div class="bg-blue-500 h-full w-[95%]"></div>
                            </div>
                        </div>
                        <div class="stat-card border-amber-500/20">
                            <span class="text-[9px] font-bold text-slate-500 uppercase block">Phí thu</span>
                            <div class="text-xl font-black text-amber-500">2.1 tỷ</div>
                            <div class="h-[45px] mt-2"><canvas id="chartFee"></canvas></div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="stat-card flex flex-col">
                            <h4 class="text-[10px] font-bold uppercase mb-4 text-blue-400 flex justify-between"><span>AI
                                    Vision Monitor</span><span class="text-red-500 animate-pulse font-black">LIVE</span>
                            </h4>
                            <div class="cam-container border border-slate-700 relative mb-4">
                                <img src="https://images.unsplash.com/photo-1497366216548-37526070297c?auto=format&fit=crop&w=600"
                                    class="w-full h-full object-cover opacity-60">
                                <div
                                    class="absolute top-2 left-2 bg-blue-600 px-2 py-0.5 text-[8px] font-bold rounded uppercase text-white font-black">
                                    Lobby Central - Security</div>
                            </div>
                            <button
                                class="w-full py-2 bg-slate-100 dark:bg-slate-800 text-blue-600 dark:text-blue-400 text-[10px] font-black uppercase rounded-lg border dark:border-slate-700">Xem
                                thêm camera</button>
                        </div>

                        <div class="stat-card flex flex-col" x-data="{ t1: 42, t2: 5 }">
                            <h4 class="text-[10px] font-bold uppercase mb-4 text-blue-400">Tần suất thang máy</h4>
                            <div class="grid grid-cols-2 gap-2 text-[9px] font-black mb-4 transition-colors"
                                :class="darkMode ? 'text-white' : 'text-slate-700'"
                                x-init="setInterval(() => { t1 = Math.floor(Math.random() * 50); t2 = Math.floor(Math.random() * 50); }, 4000)">
                                <div class="p-2 bg-slate-100 dark:bg-slate-800/40 rounded flex justify-between">
                                    <span>Resident</span><span class="text-emerald-400"><span x-text="'T'+t1"></span> <i
                                            class="fas fa-caret-up animate-bounce"></i></span></div>
                                <div class="p-2 bg-slate-100 dark:bg-slate-800/40 rounded flex justify-between">
                                    <span>Service</span><span class="text-blue-500"><span x-text="'T'+t2"></span> <i
                                            class="fas fa-caret-down"></i></span></div>
                                <div
                                    class="p-2 bg-slate-100 dark:bg-slate-800/40 rounded flex justify-between border border-red-500/20">
                                    <span>Maint</span><span class="text-red-500 uppercase">Fixing</span></div>
                                <div class="p-2 bg-slate-100 dark:bg-slate-800/40 rounded flex justify-between">
                                    <span>PCCC</span><span
                                        class="text-slate-400 uppercase tracking-tighter">Ready</span></div>
                            </div>
                            <div class="flex-grow min-h-[140px]"><canvas id="chartElevator"></canvas></div>
                        </div>

                        <div class="stat-card flex flex-col">
                            <h4 class="text-[10px] font-bold uppercase mb-4 text-blue-400 tracking-widest">Giao thông hạ
                                tầng</h4>
                            <div class="grid grid-cols-2 gap-2 mb-4">
                                <div class="p-2 rounded border border-slate-700 text-center">
                                    <p class="text-[7px] opacity-50 uppercase font-black"
                                        :class="darkMode ? 'text-white' : 'text-slate-900'">Xe điện</p>
                                    <p class="text-xs font-black text-yellow-500">45/60</p>
                                </div>
                                <div class="p-2 rounded border border-slate-700 text-center">
                                    <p class="text-[7px] opacity-50 uppercase font-black"
                                        :class="darkMode ? 'text-white' : 'text-slate-900'">Ô tô</p>
                                    <p class="text-xs font-black text-blue-500">342/400</p>
                                </div>
                            </div>
                            <div class="flex-grow min-h-[140px]"><canvas id="chartTrafficTrend"></canvas></div>
                        </div>
                    </div>

                    <div class="stat-card overflow-hidden">
                        <div
                            class="p-4 bg-slate-800/30 border-b border-slate-700 uppercase text-[10px] font-black text-blue-500">
                            Phản hồi cư dân gần đây (UC-26)</div>
                        <table class="w-full text-left text-[11px]" :class="darkMode ? 'text-white' : 'text-slate-700'">
                            <tbody class="divide-y divide-slate-800/50">
                                <tr @click="showModal = true; selectedIssue = {room: 'CH-1204', desc: 'Chiếu sáng sảnh bị hỏng', status: 'Chờ xử lý', date: '30/12/2025'}"
                                    class="cursor-pointer hover:bg-blue-500/5">
                                    <td class="p-4 font-bold text-blue-500">CH-1204</td>
                                    <td class="p-4 opacity-80 italic">Chiếu sáng sảnh bị hỏng</td>
                                    <td class="p-4 text-right text-red-500 font-bold uppercase text-[9px]">Chờ xử lý
                                    </td>
                                </tr>
                                <tr class="text-emerald-500 font-bold">
                                    <td class="p-4">CH-0815</td>
                                    <td class="p-4 italic opacity-80">Cấp thêm thẻ xe cư dân</td>
                                    <td class="p-4 text-right"><span
                                            class="bg-emerald-900/30 px-2 py-0.5 rounded border border-emerald-500 text-[9px] uppercase font-black">Đã
                                            xử lý</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div x-show="section === 'roadmap'" class="space-y-6">
                    <div class="stat-card p-8 bg-blue-900/10 border-blue-500/30">
                        <h4 class="font-black text-blue-500 uppercase text-lg mb-8">Hệ sinh thái SCP (Giai đoạn 1)</h4>
                        <div
                            class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 uppercase font-black text-[10px]">
                            <div
                                class="p-4 bg-slate-800/50 border border-slate-700 rounded-xl flex items-center gap-4 text-blue-500">
                                <i class="fas fa-mobile-alt text-2xl"></i><span
                                    :class="darkMode ? 'text-white' : 'text-slate-800'">App cư dân</span></div>
                            <div
                                class="p-4 bg-slate-800/50 border border-slate-700 rounded-xl flex items-center gap-4 text-emerald-500">
                                <i class="fas fa-shield-alt text-2xl"></i><span
                                    :class="darkMode ? 'text-white' : 'text-slate-800'">App an ninh</span></div>
                            <div
                                class="p-4 bg-slate-800/50 border border-slate-700 rounded-xl flex items-center gap-4 text-red-500">
                                <i class="fas fa-fire-extinguisher text-2xl"></i><span
                                    :class="darkMode ? 'text-white' : 'text-slate-800'">Hệ thống báo cháy</span></div>
                            <div
                                class="p-4 bg-slate-800/50 border border-slate-700 rounded-xl flex items-center gap-4 text-purple-500">
                                <i class="fas fa-video text-2xl"></i><span
                                    :class="darkMode ? 'text-white' : 'text-slate-800'">Camera AI tự động</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div x-show="showModal" class="fixed inset-0 z-[100] flex items-center justify-center bg-black/80 p-4" x-cloak>
            <div class="stat-card max-w-md w-full border-blue-500 shadow-2xl" @click.away="showModal = false">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="font-black uppercase text-blue-400">Chi tiết phản hồi</h3>
                    <i class="fas fa-times cursor-pointer opacity-50 hover:opacity-100" @click="showModal = false"></i>
                </div>
                <div class="space-y-4 text-sm" :class="darkMode ? 'text-white' : 'text-slate-800'">
                    <div><span class="opacity-50 text-[10px] block font-bold uppercase">Phòng:</span> <span
                            class="font-bold text-lg" x-text="selectedIssue?.room"></span></div>
                    <div><span class="opacity-50 text-[10px] block font-bold uppercase">Nội dung:</span> <span
                            x-text="selectedIssue?.desc"></span></div>
                    <div><span class="opacity-50 text-[10px] block font-bold uppercase">Trạng thái:</span> <span
                            class="font-bold text-blue-500" x-text="selectedIssue?.status"></span></div>
                </div>
                <button @click="showModal = false"
                    class="w-full mt-6 py-3 bg-blue-600 text-white font-black uppercase text-xs rounded-lg shadow-lg">Đóng</button>
            </div>
        </div>
    </div>

    <script>
        const getColors = () => {
            const isDark = document.body.classList.contains('dark');
            return { grid: isDark ? '#1e293b' : '#e2e8f0', text: isDark ? '#94a3b8' : '#475569' };
        };

        const miniCfg = (color) => ({
            type: 'line',
            data: { labels: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10], datasets: [{ borderColor: color, data: Array.from({ length: 10 }, () => Math.floor(Math.random() * 10 + 20)), tension: 0.4, borderWidth: 2, pointRadius: 0 }] },
            options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { display: false }, y: { display: false } } }
        });

        let charts = {};
        window.onload = () => {
            const c = getColors();
            charts.temp = new Chart(document.getElementById('chartTemp'), miniCfg('#10b981'));
            charts.humid = new Chart(document.getElementById('chartHumid'), miniCfg('#3b82f6'));
            charts.aqi = new Chart(document.getElementById('chartAQI'), miniCfg('#8b5cf6'));
            charts.fee = new Chart(document.getElementById('chartFee'), miniCfg('#f59e0b'));

            charts.elevator = new Chart(document.getElementById('chartElevator'), {
                type: 'bar',
                data: { labels: ['6h', '10h', '14h', '18h', '22h'], datasets: [{ backgroundColor: '#3b82f6', borderRadius: 4, data: [120, 450, 200, 310, 180] }] },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { display: false }, x: { grid: { display: false }, ticks: { color: c.text, font: { size: 8, weight: 'bold' } } } } }
            });

            charts.traffic = new Chart(document.getElementById('chartTrafficTrend'), {
                type: 'line',
                data: { labels: ['0h', '8h', '16h', '24h'], datasets: [{ fill: true, backgroundColor: 'rgba(59, 130, 246, 0.1)', borderColor: '#3b82f6', borderWidth: 2, data: [200, 380, 340, 390] }] },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { display: false }, x: { grid: { color: c.grid }, ticks: { color: c.text, font: { size: 8, weight: 'bold' } } } } }
            });

            setInterval(() => {
                [charts.temp, charts.humid, charts.aqi].forEach(chart => {
                    chart.data.datasets[0].data.shift();
                    chart.data.datasets[0].data.push(Math.floor(Math.random() * 10 + 20));
                    chart.update('none');
                });
            }, 3000);
        };

        window.updateCharts = () => {
            setTimeout(() => {
                const c = getColors();
                if (charts.elevator) { charts.elevator.options.scales.x.ticks.color = c.text; charts.elevator.update(); }
                if (charts.traffic) { charts.traffic.options.scales.x.grid.color = c.grid; charts.traffic.options.scales.x.ticks.color = c.text; charts.traffic.update(); }
            }, 100);
        };
    </script>
</body>

</html>